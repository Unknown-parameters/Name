<?xml version="1.0" encoding="UTF-8"?>
<hdevelop file_version="1.2" halcon_version="18.11.1.1">
<procedure name="main">
<interface/>
<body>
<l>* read_image (Image4, 'C:/Users/wangz/Desktop/tu/5.jpg')</l>
<c></c>
<l>* gen_rectangle1 (ROI_0, 1128.12, 173.769, 1160.93, 285.603)</l>
<c></c>
<c></c>
<c></c>
<c></c>
<c></c>
<l>* read_image (Image4, 'C:/Users/wangz/Desktop/tu/6.jpg')</l>
<c></c>
<l>* gen_rectangle1 (ROI_0, 1081.43, 148.879, 1120.04, 279.885)</l>
<c></c>
<l>* image_sign3(Image4, ROI_0, NAME, sign)</l>
<c></c>
<l>read_image (Image4, 'C:/Users/wangz/Desktop/tu/4.jpg')</l>
<l>gen_rectangle1 (ROI_0, 3081.41, 660.589, 3167.71, 961.494)</l>
<c></c>
<c>*封装区</c>
<c>*提取区域的位置坐标/选择第四个</c>
<l>rgb1_to_gray (Image4, GrayImage)</l>
<l>get_region_convex(ROI_0, Rows, Columns)</l>
<l>gen_empty_obj(NAME)</l>
<c>*添加位移参数和判断参数</c>
<l>short_row:=62</l>
<l>short_col:=310</l>
<l>long_col:=440</l>
<c>*添加待检测的区域</c>
<l>xpiont:=[]</l>
<l>ypiont:=[]</l>
<l>sign:=[]</l>
<l>sign1:=[]</l>
<l>sign2:=[]</l>
<l>sign3:=[]</l>
<l>xpiont[0]:=Rows[3]+short_row</l>
<l>xpiont[1]:=xpiont[0]</l>
<l>xpiont[2]:=xpiont[0]+2*short_row</l>
<l>xpiont[3]:=xpiont[2]</l>
<l>ypiont[0]:=Columns[3]+short_col</l>
<l>ypiont[1]:=ypiont[0]+2*long_col</l>
<l>ypiont[2]:=ypiont[0]</l>
<l>ypiont[3]:=ypiont[1]</l>
<c>*位置</c>
<l>for I:=0 to 3 by 1</l>
<c>             </c>
<c>             *划定区域</c>
<l>             gen_rectangle1(name,xpiont[I],ypiont[I],xpiont[I]+short_row,ypiont[I]+short_col)</l>
<c>             *合并多个ROI</c>
<l>             concat_obj (name,NAME,NAME)</l>
<c>             *截取对应区域图片</c>
<l>             reduce_domain(Image4,name, ImageReduced)</l>
<c>             *区域图片映射为轮廓</c>
<l>             edges_sub_pix(ImageReduced,Edges, 'canny', 1, 20, 40)</l>
<c>             *得到轮廓长度数组</c>
<l>             length_xld(Edges, Length)</l>
<c>             *云团数目大于五则有签字</c>
<l>             tuple_length(Length,Length1)</l>
<l>             if(Length1&gt;5)</l>
<l>                         sign1[I]:=0.95</l>
<l>             else</l>
<l>                         sign1[I]:=0</l>
<l>             endif</l>
<c>             *计算数组元素之和</c>
<l>             tuple_sum(Length,Sum)</l>
<c>             *判断总长度大于GN则有签字</c>
<l>             if(Sum&gt;400)</l>
<l>                      sign2[I]:=0.025</l>
<l>             else</l>
<l>                      sign2[I]:=0</l>
<l>             endif</l>
<c>             *获取灰度均值</c>
<l>             intensity (name, GrayImage, Mean, Deviation)</l>
<c>             * 1为由签名；0为没有签</c>
<l>             if (Mean&lt;210)</l>
<l>                        sign3[I]:=0.025</l>
<l>             else</l>
<l>                        sign3[I]:=0</l>
<l>             endif</l>
<l>             sign[I]:=sign1[I]+sign2[I]+sign3[I] </l>
<l>                 stop() </l>
<l>endfor</l>
</body>
<docu id="main">
<parameters/>
</docu>
</procedure>
</hdevelop>
